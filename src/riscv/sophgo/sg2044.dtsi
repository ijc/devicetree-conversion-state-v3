// SPDX-License-Identifier: (GPL-2.0 OR MIT)
/*
 * Copyright (C) 2025 Inochi Amaoto <inochiama@gmail.com>
 */

#include <dt-bindings/clock/sophgo,sg2044-pll.h>
#include <dt-bindings/clock/sophgo,sg2044-clk.h>
#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/gpio/gpio.h>

#include "sg2044-cpus.dtsi"
#include "sg2044-reset.h"

/ {
	compatible = "sophgo,sg2044";

	memory@80000000 {
		device_type = "memory";
		reg = <0x00000000 0x80000000 0x00000010 0x00000000>;
	};

	osc: oscillator {
		compatible = "fixed-clock";
		clock-output-names = "osc";
		#clock-cells = <0>;
	};

	soc {
		compatible = "simple-bus";
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		uart0: serial@7030000000 {
			compatible = "sophgo,sg2044-uart", "snps,dw-apb-uart";
			reg = <0x70 0x30000000 0x0 0x1000>;
			clock-frequency = <500000000>;
			clocks = <&clk CLK_GATE_UART_500M>,
				 <&clk CLK_GATE_APB_UART>;
			clock-names = "baudclk", "apb_pclk";
			interrupt-parent = <&intc>;
			interrupts = <41 IRQ_TYPE_LEVEL_HIGH>;
			reg-shift = <2>;
			reg-io-width = <4>;
			resets = <&rst RST_UART0>;
			status = "disabled";
		};

		uart1: serial@7030001000 {
			compatible = "sophgo,sg2044-uart", "snps,dw-apb-uart";
			reg = <0x70 0x30001000 0x0 0x1000>;
			clock-frequency = <500000000>;
			clocks = <&clk CLK_GATE_UART_500M>,
				 <&clk CLK_GATE_APB_UART>;
			clock-names = "baudclk", "apb_pclk";
			interrupt-parent = <&intc>;
			interrupts = <42 IRQ_TYPE_LEVEL_HIGH>;
			reg-shift = <2>;
			reg-io-width = <4>;
			resets = <&rst RST_UART1>;
			status = "disabled";
		};

		uart2: serial@7030002000 {
			compatible = "sophgo,sg2044-uart", "snps,dw-apb-uart";
			reg = <0x70 0x30002000 0x0 0x1000>;
			clock-frequency = <500000000>;
			clocks = <&clk CLK_GATE_UART_500M>,
				 <&clk CLK_GATE_APB_UART>;
			clock-names = "baudclk", "apb_pclk";
			interrupt-parent = <&intc>;
			interrupts = <43 IRQ_TYPE_LEVEL_HIGH>;
			reg-shift = <2>;
			reg-io-width = <4>;
			resets = <&rst RST_UART2>;
			status = "disabled";
		};

		uart3: serial@7030003000 {
			compatible = "sophgo,sg2044-uart", "snps,dw-apb-uart";
			reg = <0x70 0x30003000 0x0 0x1000>;
			clock-frequency = <500000000>;
			clocks = <&clk CLK_GATE_UART_500M>,
				 <&clk CLK_GATE_APB_UART>;
			clock-names = "baudclk", "apb_pclk";
			interrupt-parent = <&intc>;
			interrupts = <44 IRQ_TYPE_LEVEL_HIGH>;
			reg-shift = <2>;
			reg-io-width = <4>;
			resets = <&rst RST_UART3>;
			status = "disabled";
		};

		gpio0: gpio@7040009000 {
			compatible = "snps,dw-apb-gpio";
			reg = <0x70 0x40009000 0x0 0x1000>;
			#address-cells = <1>;
			#size-cells = <0>;
			clocks = <&clk CLK_GATE_APB_GPIO>,
				 <&clk CLK_GATE_GPIO_DB>;
			clock-names = "bus", "db";
			resets = <&rst RST_GPIO0>;

			porta: gpio-controller@0 {
				compatible = "snps,dw-apb-gpio-port";
				reg = <0>;
				gpio-controller;
				#gpio-cells = <2>;
				ngpios = <32>;
				interrupt-controller;
				#interrupt-cells = <2>;
				interrupt-parent = <&intc>;
				interrupts = <26 IRQ_TYPE_LEVEL_HIGH>;
			};
		};

		gpio1: gpio@704000a000 {
			compatible = "snps,dw-apb-gpio";
			reg = <0x70 0x4000a000 0x0 0x1000>;
			#address-cells = <1>;
			#size-cells = <0>;
			clocks = <&clk CLK_GATE_APB_GPIO>,
				 <&clk CLK_GATE_GPIO_DB>;
			clock-names = "bus", "db";
			resets = <&rst RST_GPIO1>;

			portb: gpio-controller@0 {
				compatible = "snps,dw-apb-gpio-port";
				reg = <0>;
				gpio-controller;
				#gpio-cells = <2>;
				ngpios = <32>;
				interrupt-controller;
				#interrupt-cells = <2>;
				interrupt-parent = <&intc>;
				interrupts = <27 IRQ_TYPE_LEVEL_HIGH>;
			};
		};

		gpio2: gpio@704000b000 {
			compatible = "snps,dw-apb-gpio";
			reg = <0x70 0x4000b000 0x0 0x1000>;
			#address-cells = <1>;
			#size-cells = <0>;
			clocks = <&clk CLK_GATE_APB_GPIO>,
				 <&clk CLK_GATE_GPIO_DB>;
			clock-names = "bus", "db";
			resets = <&rst RST_GPIO2>;

			portc: gpio-controller@0 {
				compatible = "snps,dw-apb-gpio-port";
				reg = <0>;
				gpio-controller;
				#gpio-cells = <2>;
				ngpios = <32>;
				interrupt-controller;
				#interrupt-cells = <2>;
				interrupt-parent = <&intc>;
				interrupts = <28 IRQ_TYPE_LEVEL_HIGH>;
			};
		};

		syscon: syscon@7050000000 {
			compatible = "sophgo,sg2044-top-syscon", "syscon";
			reg = <0x70 0x50000000 0x0 0x1000>;
			#clock-cells = <1>;
			clocks = <&osc>;
		};

		clk: clock-controller@7050002000 {
			compatible = "sophgo,sg2044-clk";
			reg = <0x70 0x50002000 0x0 0x1000>;
			#clock-cells = <1>;
			clocks = <&syscon CLK_FPLL0>, <&syscon CLK_FPLL1>,
				 <&syscon CLK_FPLL2>, <&syscon CLK_DPLL0>,
				 <&syscon CLK_DPLL1>, <&syscon CLK_DPLL2>,
				 <&syscon CLK_DPLL3>, <&syscon CLK_DPLL4>,
				 <&syscon CLK_DPLL5>, <&syscon CLK_DPLL6>,
				 <&syscon CLK_DPLL7>, <&syscon CLK_MPLL0>,
				 <&syscon CLK_MPLL1>, <&syscon CLK_MPLL2>,
				 <&syscon CLK_MPLL3>, <&syscon CLK_MPLL4>,
				 <&syscon CLK_MPLL5>;
			clock-names = "fpll0", "fpll1", "fpll2", "dpll0",
				      "dpll1", "dpll2", "dpll3", "dpll4",
				      "dpll5", "dpll6", "dpll7", "mpll0",
				      "mpll1", "mpll2", "mpll3", "mpll4",
				      "mpll5";
		};

		rst: reset-controller@7050003000 {
			compatible = "sophgo,sg2044-reset",
				     "sophgo,sg2042-reset";
			reg = <0x70 0x50003000 0x0 0x1000>;
			#reset-cells = <1>;
		};
	};
};
